# dropbox-clone/Makefile1
CC = gcc
CFLAGS = -Wall -g -pthread
TARGET = server
CLIENT = client

all: $(TARGET) $(CLIENT)

$(TARGET): src/main.c src/client_threadpool.c src/commands.c
	$(CC) $(CFLAGS) -o $(TARGET) src/main.c src/client_threadpool.c src/commands.c

$(CLIENT): src/client.c
	$(CC) $(CFLAGS) -o $(CLIENT) src/client.c

clean:
	rm -f $(TARGET) $(CLIENT) *.o *~

test:
	@echo "Starting server test..."
	./$(TARGET) # Run server without background
	@echo "Server started. Run ./$(CLIENT) manually to test, then press Ctrl+C to stop server."
	@echo "Test completed when you manually stop the server."

.PHONY: all clean test